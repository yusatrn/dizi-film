"use strict";(self.webpackChunkfilm_dizi_oneri=self.webpackChunkfilm_dizi_oneri||[]).push([[689],{7689:(F,g,s)=>{s.r(g),s.d(g,{SearchResultsComponent:()=>E});var h=s(5558),c=s(177),a=s(9417),e=s(4438),m=s(5776),d=s(3366),p=s(345);function _(r,o){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.SpI("",t.results&&t.results.length>0?t.results.length:"0"," sonu\xe7 bulundu:")}}function f(r,o){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.Lme("(Sayfa ",t.currentPage,"/",t.totalPages,")")}}function b(r,o){if(1&r&&(e.j41(0,"p",15),e.EFF(1),e.DNE(2,f,2,2,"span",4),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Lme(" Toplam ",t.totalResults," sonu\xe7 i\xe7inden ",t.results.length," g\xf6steriliyor "),e.R7$(),e.Y8G("ngIf",t.totalPages>1)}}function P(r,o){1&r&&(e.j41(0,"div",16)(1,"div",17)(2,"span",18),e.EFF(3,"Y\xfckleniyor..."),e.k0s()(),e.j41(4,"p",19),e.EFF(5,"Arama sonu\xe7lar\u0131 y\xfckleniyor..."),e.k0s()())}function v(r,o){1&r&&(e.j41(0,"div",20),e.nrm(1,"i",21),e.EFF(2," Arama sonu\xe7lar\u0131 y\xfcklenirken bir hata olu\u015ftu. L\xfctfen daha sonra tekrar deneyin. "),e.k0s())}function C(r,o){if(1&r&&(e.j41(0,"div",16)(1,"div",22),e.nrm(2,"i",23),e.j41(3,"h2"),e.EFF(4,"Sonu\xe7 bulunamad\u0131"),e.k0s(),e.j41(5,"p",24),e.EFF(6),e.k0s()()()),2&r){const t=e.XpG();e.R7$(6),e.SpI(' "',t.searchQuery,'" i\xe7in hi\xe7bir sonu\xe7 bulunamad\u0131. L\xfctfen farkl\u0131 anahtar kelimelerle tekrar deneyin. ')}}function y(r,o){if(1&r){const t=e.RV6();e.j41(0,"div",33)(1,"div",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,l=e.XpG(2);return e.Njj(l.navigateToDetails(n))}),e.j41(2,"div",35),e.nrm(3,"img",36),e.j41(4,"div",37)(5,"span"),e.EFF(6),e.k0s()()(),e.j41(7,"div",38)(8,"h5",39),e.EFF(9),e.k0s(),e.j41(10,"p",40),e.nrm(11,"i",41),e.EFF(12),e.k0s(),e.j41(13,"p",42),e.EFF(14),e.k0s()(),e.j41(15,"div",43)(16,"div",44)(17,"span",45),e.nrm(18,"i",46),e.EFF(19),e.nI1(20,"number"),e.k0s(),e.j41(21,"button",47),e.nrm(22,"i",48),e.EFF(23,"Detaylar "),e.k0s()()()()()}if(2&r){const t=o.$implicit,i=e.XpG(2);e.R7$(3),e.Y8G("src",t.poster_path?i.imageBaseUrl+"w500"+t.poster_path:"assets/no-image.jpg",e.B4B)("alt",t.title||t.name),e.R7$(),e.Y8G("ngClass",t.media_type),e.R7$(2),e.JRh(i.getMediaTypeLabel(t.media_type)),e.R7$(3),e.JRh(t.title||t.name),e.R7$(3),e.SpI(" ",t.release_date||t.first_air_date?i.getYear(t.release_date||t.first_air_date):"Belirtilmemi\u015f"," "),e.R7$(2),e.JRh(t.overview||"Bu i\xe7erik i\xe7in \xf6zet bulunmamaktad\u0131r."),e.R7$(5),e.SpI(" ",t.vote_average?e.i5U(20,8,t.vote_average,"1.1-1"):"N/A"," ")}}function R(r,o){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"div",25),e.DNE(2,y,24,11,"div",26),e.k0s(),e.j41(3,"div",27)(4,"button",28),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.changePage(n.currentPage-1))}),e.nrm(5,"i",29),e.EFF(6," \xd6nceki "),e.k0s(),e.j41(7,"span",30),e.EFF(8),e.k0s(),e.j41(9,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.changePage(n.currentPage+1))}),e.EFF(10," Sonraki "),e.nrm(11,"i",32),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.results),e.R7$(2),e.Y8G("disabled",1===t.currentPage),e.R7$(4),e.Lme(" Sayfa ",t.currentPage," / ",t.totalPages," "),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}let E=(()=>{class r{constructor(t,i,n,l){this.route=t,this.router=i,this.apiService=n,this.titleService=l,this.searchQuery="",this.results=[],this.loading=!0,this.error=!1,this.currentPage=1,this.totalPages=0,this.totalResults=0,this.imageBaseUrl="https://image.tmdb.org/t/p/"}ngOnInit(){this.route.queryParams.pipe((0,h.n)(t=>(this.searchQuery=t.query||"",this.currentPage=+t.page||1,this.searchQuery?(this.loading=!0,this.error=!1,this.titleService.setTitle(`"${this.searchQuery}" i\xe7in Sonu\xe7lar | Film & Dizi`),this.apiService.searchMulti(this.searchQuery,this.currentPage)):(this.results=[],this.loading=!1,[])))).subscribe({next:t=>{t&&t.results?(this.results=t.results.filter(i=>"movie"===i.media_type||"tv"===i.media_type),this.totalResults=t.total_results,this.totalPages=t.total_pages):(this.results=[],this.totalResults=0,this.totalPages=0),this.loading=!1},error:t=>{console.error("Search error:",t),this.error=!0,this.loading=!1}})}changePage(t){t<1||t>this.totalPages||(this.router.navigate([],{relativeTo:this.route,queryParams:{query:this.searchQuery,page:t},queryParamsHandling:"merge"}),window.scrollTo(0,0))}navigateToDetails(t){this.router.navigate(["/detay","movie"===t.media_type?"film":"dizi",t.id])}getMediaTypeLabel(t){return"movie"===t?"Film":"Dizi"}getYear(t){return t?new Date(t).getFullYear().toString():"Belirtilmemi\u015f"}getPageNumber(t){return this.totalPages<=7?t+1:0===t?1:6===t?this.totalPages:3===t?this.currentPage:2===t&&this.currentPage>3?this.currentPage-1:4===t&&this.currentPage<this.totalPages-2?this.currentPage+1:1===t?2:5===t?this.totalPages-1:0}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(m.nX),e.rXU(m.Ix),e.rXU(d.G),e.rXU(p.hE))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-search-results"]],standalone:!0,features:[e.aNF],decls:18,vars:8,consts:[[1,"container","py-5"],[1,"row","mb-4"],[1,"col-12"],[1,"search-title","mb-3"],[4,"ngIf"],[1,"search-query"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["class","search-meta",4,"ngIf"],[1,"search-form-mini"],[1,"d-flex",3,"ngSubmit"],["type","text","name","searchQuery","placeholder","Yeni arama...","required","",1,"form-control","form-control-sm","me-2",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-sm","btn-primary"],[1,"bi","bi-search"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"search-meta"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],["role","alert",1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"no-results"],[1,"bi","bi-search","display-1","text-muted","mb-3"],[1,"text-muted"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-4","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"pagination-container","d-flex","justify-content-center","my-4"],[1,"btn","btn-outline-primary","me-2",3,"click","disabled"],[1,"bi","bi-chevron-left"],[1,"pagination-info","align-self-center","mx-3"],[1,"btn","btn-outline-primary","ms-2",3,"click","disabled"],[1,"bi","bi-chevron-right"],[1,"col"],[1,"card","h-100","result-card",3,"click"],[1,"position-relative"],[1,"card-img-top","result-poster",3,"src","alt"],[1,"media-type-badge",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"card-text","text-muted","small","mb-2"],[1,"bi","bi-calendar3","me-1"],[1,"card-text","overview"],[1,"card-footer","bg-transparent","border-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"rating"],[1,"bi","bi-star-fill","text-warning","me-1"],[1,"btn","btn-sm","btn-outline-primary"],[1,"bi","bi-info-circle","me-1"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.DNE(4,_,2,1,"span",4),e.j41(5,"span",5),e.EFF(6),e.k0s()(),e.j41(7,"div",6),e.DNE(8,b,3,3,"p",7),e.j41(9,"div",8)(10,"form",9),e.bIt("ngSubmit",function(){return n.changePage(1)}),e.j41(11,"input",10),e.mxI("ngModelChange",function(u){return e.DH7(n.searchQuery,u)||(n.searchQuery=u),u}),e.k0s(),e.j41(12,"button",11),e.nrm(13,"i",12),e.k0s()()()()()(),e.DNE(14,P,6,0,"div",13)(15,v,3,0,"div",14)(16,C,7,1,"div",13)(17,R,12,5,"div",4),e.k0s()),2&i&&(e.R7$(4),e.Y8G("ngIf",n.searchQuery),e.R7$(2),e.SpI('"',n.searchQuery,'"'),e.R7$(2),e.Y8G("ngIf",n.totalResults>0),e.R7$(3),e.R50("ngModel",n.searchQuery),e.R7$(3),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error),e.R7$(),e.Y8G("ngIf",!n.loading&&!n.error&&0===n.results.length),e.R7$(),e.Y8G("ngIf",!n.loading&&!n.error&&n.results.length>0))},dependencies:[c.QX,c.YU,c.Sq,c.bT,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV],styles:[".search-title[_ngcontent-%COMP%]{font-weight:600}.search-title[_ngcontent-%COMP%]   .search-query[_ngcontent-%COMP%]{color:#007bff}.search-meta[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:0}.search-form-mini[_ngcontent-%COMP%]{width:300px}.result-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s;cursor:pointer;border-radius:8px;overflow:hidden;border:1px solid rgba(0,0,0,.125)}.result-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 15px #0000001a}.result-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.result-card[_ngcontent-%COMP%]   .overview[_ngcontent-%COMP%]{font-size:.85rem;line-height:1.5;max-height:4.5em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.result-card[_ngcontent-%COMP%]   .result-poster[_ngcontent-%COMP%]{height:300px;object-fit:cover}.result-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding-top:0}.result-card[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{font-weight:500}.media-type-badge[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;padding:3px 8px;border-radius:4px;font-size:.8rem;font-weight:500}.media-type-badge.movie[_ngcontent-%COMP%]{background-color:#0d6efde6;color:#fff}.media-type-badge.tv[_ngcontent-%COMP%]{background-color:#198754e6;color:#fff}.no-results[_ngcontent-%COMP%]{padding:30px 0}.no-results[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.5}.no-results[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:15px}[_nghost-%COMP%]     .pagination .page-item.active .page-link{background-color:#007bff;border-color:#007bff}[_nghost-%COMP%]     .pagination .page-link{color:#007bff}@media (max-width: 767.98px){.search-form-mini[_ngcontent-%COMP%]{width:200px}.result-card[_ngcontent-%COMP%]   .result-poster[_ngcontent-%COMP%]{height:200px}}@media (max-width: 575.98px){.search-form-mini[_ngcontent-%COMP%]{width:100%;margin-top:15px}}"]})}}return r})()}}]);